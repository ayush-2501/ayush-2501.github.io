<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1; minimum-scale=1; user-scalable=no;"> <meta content="My views on the Flash web server" name="description"> <meta name="keywords" content="gh-pages,website,blog,computer science,software engineering,servers,server design"> <meta name="author" content="Ayush Pradhan"> <meta name="baseurl" content=""> <title> Ayush Pradhan|Flash: An efficient and portable Web Server </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20180125.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20180125.min.js"></script> <script src="/static/assets/blog-20180125.min.js"></script> <!-- Google AdSense --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-6196184668650108", enable_page_level_ads: true }); </script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src="/static/assets/img/search/cb-close.png" id="close-btn"/> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src="/static/assets/img/search/cb-search.png" id="search-btn" title="Double click Ctrl"/> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Ayush Pradhan</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href="blog/"></a></li> </ul> </div> </div> </nav> </div> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <!-- <a class="btn btn-white btn-xs" href="/computer science">Computer Science</a> --> <a class="btn btn-white btn-xs" style="pointer-events: none">Computer Science</a> <!-- <a class="btn btn-white btn-xs" href="/system design">System Design</a> --> <a class="btn btn-white btn-xs" style="pointer-events: none">System Design</a> <!-- <a class="btn btn-white btn-xs" href="/servers">Servers</a> --> <a class="btn btn-white btn-xs" style="pointer-events: none">Servers</a> <!-- <a class="btn btn-white btn-xs" href="/backend">Backend</a> --> <a class="btn btn-white btn-xs" style="pointer-events: none">Backend</a> <!-- <a class="btn btn-white btn-xs" href="/software engineering">Software Engineering</a> --> <a class="btn btn-white btn-xs" style="pointer-events: none">Software Engineering</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 16 Jan 2022</span> <h1> Flash: An efficient and portable Web Server </h1> </div> <p>The reference paper can be found <a href="https://www.usenix.org/legacy/events/usenix99/full_papers/pai/pai.pdf">here.</a></p> <h2 id="summary">Summary</h2> <p>In this paper, the authors propose Flash – an efficient and portable web server that utilizes an asymmetric multi-process even-driven (AMPED) architecture. This architecture is a combination of the single-process event-driven (SPED) and multi-process/multi-thread (MP/MT) architectures. Flash consists of a main process that handles HTTP requests in an event-driven fashion, and it uses several asynchronous helper processes to perform blocking operations on the disk. The authors provide a brief overview of the different types of server architectures and analyze their server’s performance compared to Zeus (SPED) and Apache (MP/MT) servers as benchmarks. The authors also introduce several important optimizations in caching, byte alignment, file access via mmap and checking for memory residency before calling helper processes which result in large performance gains. Most of these optimizations are fairly standard in present-day web servers but at the time the paper was published, these ideas were quite novel.</p> <h2 id="positive-points">Positive Points</h2> <ul> <li>The paper provides great insights about key points to consider while designing web servers. It also provides a detailed comparison based on performance characteristics of each design choice.</li> <li>The evaluation experiments are conducted in an exhaustive manner with carefully drawn out workloads that tested the server’s performance at its maximum capacity. The evaluation workflow is exemplary.</li> <li>The paper introduces many optimization ideas that are widely used and applicable in present-day web servers. The ideas of application-level caching with both data and computation caches, DMA for scatter-gather support etc. are ideas that were quite novel at the time the paper was published.</li> </ul> <h2 id="drawbacks">Drawbacks</h2> <ul> <li>At the time this paper was published, most web servers mainly handled static data. However, in present day servers the content is increasingly dynamic. Therefore the claim that most non-blocking IO operations are just disk reads is not true anymore.</li> <li>The paper does not talk about sendfile() which is a non-blocking system call that uses Direct Memory Access (DMA) to copy a file’s contents into OS memory directly.</li> <li>The authors ran most of the evaluation experiments on in a LAN setting and their WAN evaluations were also simulated on LAN. Nowadays, most of the clients interact with servers through WAN.</li> </ul> <h2 id="research-questions">Research Questions</h2> <ol> <li>Present day web-servers serve increasingly dynamic content – how would a server like Flash handle such work loads? Creating a new process for each dynamic request may not be feasible.</li> <li>Why did Flash lose against competitors like Apache, which also have adopted many ideas from Flash?</li> <li>Can sendfile() (and related syscalls) be used to handle blocking disk operations instead of multiple threads/processes? Are there any caveats?</li> </ol> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">Computer Science</button> <button class="btn btn-white btn-xs" type="button">System Design</button> <button class="btn btn-white btn-xs" type="button">Servers</button> <button class="btn btn-white btn-xs" type="button">Backend</button> <button class="btn btn-white btn-xs" type="button">Software Engineering</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> </body> </html>
